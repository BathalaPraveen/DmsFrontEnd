<div class="container mt-4">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a (click)="gotoDashboard()" class="cursor-pointer">Home</a>
      </li>
      <li class="breadcrumb-item">
        Department Management
      </li>
    </ol>
  </nav>

  <!-- Header Box -->
  <div class="card shadow-sm p-3 mb-4">
    <div class="d-flex justify-content-between align-items-center">
      <h3 class="m-0">Department List</h3>

      <div class="d-flex gap-2">
        <button class="btn btn-success" (click)="downloadExcel()">Excel</button>
        <button class="btn btn-danger" (click)="downloadPDF()">PDF</button>
        <button class="btn btn-primary" (click)="gotoAddDepartment()">+ Add</button>
      </div>
    </div>
  </div>

  <!-- Table Box -->
  <div class="card shadow-sm p-4">
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead class="table-header">
        <tr>
          <th>S.no</th>
          <th>Department</th>
          <th>State</th>
          <th>District</th>
          <th>Name</th>
          <th>Position</th>
          <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let d of departments; let i = index">
          <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
          <td>{{ d.department }}</td>
          <td>{{ d.state }}</td>
          <td>{{ d.district }}</td>
          <td>{{ d.name }}</td>
          <td>{{ d.position }}</td>
          <td>
<!--            <button class="btn btn-sm btn-success" (click)="viewDepartment(d.id)">View</button>-->
            <button class="btn btn-sm" (click)="editDepartment(d.id)">
              <i class="fas fa-edit"></i>
            </button>

            <button class="btn btn-sm danger" (click)="deleteDepartment(d.id)">
              <i class="fas fa-trash text-danger" style="cursor: pointer;" (click)="deleteDepartment(d.id)"></i>
            </button>

          </td>
        </tr>
        <tr *ngIf="departments.length === 0">
          <td colspan="7" class="text-center fw-bold py-3">No data found</td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="d-flex justify-content-between align-items-center mt-3 flex-wrap">
      <div>
        <label class="me-2 fw-bold">Items per page:</label>
        <select [(ngModel)]="itemsPerPage" (change)="updatePagination()" class="form-select d-inline-block w-auto">
          <option *ngFor="let size of [5,10,20,50]" [value]="size">{{ size }}</option>
        </select>
      </div>

      <div class="fw-bold">
        {{ currentPage }} of {{ totalPages }} pages ({{ totalItems }} items)
      </div>

      <div class="d-flex gap-2">
        <button class="btn btn-outline-secondary btn-sm" (click)="previousPage()" [disabled]="currentPage === 1">&lt;</button>
        <button class="btn btn-outline-secondary btn-sm" (click)="nextPage()" [disabled]="currentPage === totalPages">&gt;</button>
      </div>
    </div>
  </div>
</div>
